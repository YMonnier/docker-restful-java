"use strict";angular.module("webApp",["ngRoute"]).config(["$routeProvider","$httpProvider",function(a,b){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).otherwise({redirectTo:"/"})}]).run(["$rootScope",function(a){a.apiURL="http://localhost:8080/littleapp/"}]),angular.module("webApp").controller("MainCtrl",["$scope","$rootScope","apiService",function(a,b,c){a.persons=[],a.errors=[];var d=!1;c.persons.all(function(b){b.status>=200&&b.status<400&&(a.persons=b.data)},function(a){f(a)}),a.showAddingModal=function(){d=!1,a.user=null,e()};const e=function(){a.errors=[],$(".ui.modal").modal("show")};a.blankP={},a.reset=function(){a.user=angular.copy(a.blankP)},a.reset(),a.addPerson=function(b){console.log(b),d?c.persons.update(b,function(c){if(c.status>=200&&c.status<400){var d=a.persons.indexOf(b);d>-1&&(a.persons[d]=c.data)}},function(a){f(a)}):c.persons.create(b,function(b){b.status>=200&&b.status<400&&a.persons.push(b.data)},function(a){f(a)})},a.delete=function(b){var d=a.persons.indexOf(b);c.persons.delete(b,function(b){b.status>=200&&b.status<400&&d>-1&&a.persons.splice(d,1)},function(a){f(a)})},a.selection=function(b){d=!0,a.user=b,e()};const f=function(b){b.status>=400&&(a.errors=b.data.errors)}}]),angular.module("webApp").service("apiService",["$rootScope","$http",function(a,b){const c=a.apiURL+"persons/",d={headers:{"Content-Type":"application/json"}};this.persons=function(){return{all:function(a,e){b.get(c,d).then(a,e)},create:function(a,e,f){b.post(c,a,d).then(e,f)},update:function(a,e,f){b.put(c+a.id,a,d).then(e,f)},delete:function(a,e,f){b.delete(c+a.id,d).then(e,f)}}}()}]),angular.module("webApp").run(["$templateCache",function(a){a.put("views/main.html",'<div class="ui error message" ng-class="{hidden: errors.length === 0}"> <i class="close icon"></i> <div class="header"> There were some errors with your submission </div> <ul class="list"> <li ng-repeat="error in errors">{{error}}</li> </ul> </div> <button class="ui primary basic button" ng-click="showAddingModal()">Add a person</button> <table class="ui single line table"> <thead> <tr> <th></th> <th>Name</th> <th>Address</th> <th></th> <th></th> </tr> </thead> <tbody> <tr ng-repeat="person in persons"> <td><i class="user icon"></i></td> <td>{{person.name}}</td> <td>{{person.address}}</td> <td><i class="edit icon" ng-click="selection(person)"></i></td> <td><i class="remove icon" ng-click="delete(person)"></i></td> </tr> </tbody> </table> <div class="ui modal"> <i class="close icon"></i> <div class="header"> Adding </div> <div class="content"> <form class="ui form"> <div class="field"> <label>Name</label> <input type="text" name="name" ng-model="user.name" placeholder="Name..."> </div> <div class="field"> <label>Address</label> <input type="text" name="address" ng-model="user.address" placeholder="Address.." value="{{selected.address}}"> </div> </form> </div> <div class="actions"> <div class="ui black deny button"> Cancel </div> <div class="ui positive right labeled icon button" ng-click="addPerson(user)"> Submit <i class="checkmark icon"></i> </div> </div> </div>')}]);